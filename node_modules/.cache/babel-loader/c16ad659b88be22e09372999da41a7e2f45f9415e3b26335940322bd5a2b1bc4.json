{"ast":null,"code":"var _jsxFileName = \"/Users/maxko/Desktop/IronHack Bootcamp/3-module/my-artsy-app/my-artsy-app-client/src/context/Auth.context.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:5005\";\nconst AuthContext = /*#__PURE__*/React.createContext();\nfunction AuthProviderWrapper(props) {\n  _s();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  function authenticateUser() {\n    const storedToken = localStorage.getItem(\"authToken\");\n    if (storedToken) {\n      axios.get(`${API_URL}/auth/verify`, {\n        headers: {\n          Authorization: `Bearer ${storedToken}`\n        }\n      }).then(response => {\n        const user = response.data;\n        setIsLoggedIn(true);\n        setIsLoading(false);\n        setUser(user);\n      }).catch(error => {\n        setIsLoggedIn(false);\n        setIsLoading(false);\n        setUser(null);\n      });\n    } else {\n      setIsLoggedIn(false);\n      setIsLoading(false);\n      setUser(null);\n    }\n  }\n  function removeToken() {\n    localStorage.removeItem(\"authToken\");\n  }\n  function logOutUser() {\n    removeToken();\n    authenticateUser();\n    {\n      ['secondary', 'dark'].map(variant => /*#__PURE__*/_jsxDEV(Alert, {\n        variant: variant,\n        children: [\"you just logged out. \", /*#__PURE__*/_jsxDEV(Alert.Link, {\n          href: \"#\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 36\n        }, this), \". Give it a click if you like.\"]\n      }, variant, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this));\n    }\n  }\n  useEffect(() => {\n    authenticateUser();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isLoggedIn,\n      isLoading,\n      user,\n      authenticateUser,\n      logOutUser\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(AuthProviderWrapper, \"/wkMYUExdyWtGyjS2AwugXhX2sw=\");\n_c = AuthProviderWrapper;\nexport { AuthProviderWrapper, AuthContext };\nvar _c;\n$RefreshReg$(_c, \"AuthProviderWrapper\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","API_URL","AuthContext","createContext","AuthProviderWrapper","props","_s","isLoggedIn","setIsLoggedIn","isLoading","setIsLoading","user","setUser","authenticateUser","storedToken","localStorage","getItem","get","headers","Authorization","then","response","data","catch","error","removeToken","removeItem","logOutUser","map","variant","Alert","children","Link","href","fileName","_jsxFileName","lineNumber","columnNumber","Provider","value","_c","$RefreshReg$"],"sources":["/Users/maxko/Desktop/IronHack Bootcamp/3-module/my-artsy-app/my-artsy-app-client/src/context/Auth.context.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from \"axios\"\nconst API_URL = \"http://localhost:5005\"\n\nconst AuthContext = React.createContext()\n\nfunction AuthProviderWrapper(props){\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n    const [isLoading, setIsLoading] = useState(true);\n    const [user, setUser] = useState(null);\n\n    function authenticateUser(){\n        const storedToken = localStorage.getItem(\"authToken\")\n\n        if (storedToken){\n            axios.get(`${API_URL}/auth/verify`, {headers: {Authorization: `Bearer ${storedToken}`}})\n                .then((response) => {\n                    const user = response.data\n                    setIsLoggedIn(true);\n                    setIsLoading(false);\n                    setUser(user); \n                })\n                .catch((error) => {\n                    setIsLoggedIn(false);\n                    setIsLoading(false);\n                    setUser(null); \n                })\n        } else {\n            setIsLoggedIn(false);\n            setIsLoading(false);\n            setUser(null);   \n        }\n    }\n\n    function removeToken(){\n        localStorage.removeItem(\"authToken\")\n    }\n\n    function logOutUser(){\n        removeToken()\n        authenticateUser()\n        {['secondary', 'dark'].map((variant) => (\n            <Alert key={variant} variant={variant}>\n              you just logged out. <Alert.Link href=\"#\"></Alert.Link>. Give it a click if you like.\n            </Alert>\n          ))}\n    }\n\n    useEffect(() => {\n        authenticateUser()\n    },[])\n\n    return (\n        <AuthContext.Provider value={{isLoggedIn, isLoading, user, authenticateUser, logOutUser}}>\n            {props.children}\n        </AuthContext.Provider>\n    )\n}\n\nexport {AuthProviderWrapper, AuthContext}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACzB,MAAMC,OAAO,GAAG,uBAAuB;AAEvC,MAAMC,WAAW,gBAAGP,KAAK,CAACQ,aAAa,EAAE;AAEzC,SAASC,mBAAmBA,CAACC,KAAK,EAAC;EAAAC,EAAA;EAC/B,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACe,IAAI,EAAEC,OAAO,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAEtC,SAASiB,gBAAgBA,CAAA,EAAE;IACvB,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAErD,IAAIF,WAAW,EAAC;MACZhB,KAAK,CAACmB,GAAG,CAAE,GAAEhB,OAAQ,cAAa,EAAE;QAACiB,OAAO,EAAE;UAACC,aAAa,EAAG,UAASL,WAAY;QAAC;MAAC,CAAC,CAAC,CACnFM,IAAI,CAAEC,QAAQ,IAAK;QAChB,MAAMV,IAAI,GAAGU,QAAQ,CAACC,IAAI;QAC1Bd,aAAa,CAAC,IAAI,CAAC;QACnBE,YAAY,CAAC,KAAK,CAAC;QACnBE,OAAO,CAACD,IAAI,CAAC;MACjB,CAAC,CAAC,CACDY,KAAK,CAAEC,KAAK,IAAK;QACdhB,aAAa,CAAC,KAAK,CAAC;QACpBE,YAAY,CAAC,KAAK,CAAC;QACnBE,OAAO,CAAC,IAAI,CAAC;MACjB,CAAC,CAAC;IACV,CAAC,MAAM;MACHJ,aAAa,CAAC,KAAK,CAAC;MACpBE,YAAY,CAAC,KAAK,CAAC;MACnBE,OAAO,CAAC,IAAI,CAAC;IACjB;EACJ;EAEA,SAASa,WAAWA,CAAA,EAAE;IAClBV,YAAY,CAACW,UAAU,CAAC,WAAW,CAAC;EACxC;EAEA,SAASC,UAAUA,CAAA,EAAE;IACjBF,WAAW,EAAE;IACbZ,gBAAgB,EAAE;IAClB;MAAC,CAAC,WAAW,EAAE,MAAM,CAAC,CAACe,GAAG,CAAEC,OAAO,iBAC/B7B,OAAA,CAAC8B,KAAK;QAAeD,OAAO,EAAEA,OAAQ;QAAAE,QAAA,GAAC,uBAChB,eAAA/B,OAAA,CAAC8B,KAAK,CAACE,IAAI;UAACC,IAAI,EAAC;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAc,kCACzD;MAAA,GAFYR,OAAO;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAGpB,CAAC;IAAA;EACR;EAEAxC,SAAS,CAAC,MAAM;IACZgB,gBAAgB,EAAE;EACtB,CAAC,EAAC,EAAE,CAAC;EAEL,oBACIb,OAAA,CAACE,WAAW,CAACoC,QAAQ;IAACC,KAAK,EAAE;MAAChC,UAAU;MAAEE,SAAS;MAAEE,IAAI;MAAEE,gBAAgB;MAAEc;IAAU,CAAE;IAAAI,QAAA,EACpF1B,KAAK,CAAC0B;EAAQ;IAAAG,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACI;AAE/B;AAAC/B,EAAA,CAnDQF,mBAAmB;AAAAoC,EAAA,GAAnBpC,mBAAmB;AAqD5B,SAAQA,mBAAmB,EAAEF,WAAW;AAAC,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}