{"ast":null,"code":"var _jsxFileName = \"/Users/cameronaitcheson-labarr/Desktop/Ironhack/Module3/Project/my-artsy-app-client/src/context/Auth.context.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { Alert } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:5005\";\nconst AuthContext = /*#__PURE__*/React.createContext();\nfunction AuthProviderWrapper(props) {\n  _s();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  function authenticateUser() {\n    const storedToken = localStorage.getItem(\"authToken\");\n    if (storedToken) {\n      axios.get(`${API_URL}/auth/verify`, {\n        headers: {\n          Authorization: `Bearer ${storedToken}`\n        }\n      }).then(response => {\n        const user = response.data;\n        setIsLoggedIn(true);\n        setIsLoading(false);\n        setUser(user);\n      }).catch(error => {\n        setIsLoggedIn(false);\n        setIsLoading(false);\n        setUser(null);\n      });\n    } else {\n      setIsLoggedIn(false);\n      setIsLoading(false);\n      setUser(null);\n    }\n  }\n  function removeToken() {\n    localStorage.removeItem(\"authToken\");\n  }\n  function logOutUser() {\n    removeToken();\n    authenticateUser();\n    alert(\"You just Logged Out, my friend.\");\n  }\n  useEffect(() => {\n    authenticateUser();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isLoggedIn,\n      isLoading,\n      user,\n      authenticateUser,\n      logOutUser,\n      removeToken\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(AuthProviderWrapper, \"/wkMYUExdyWtGyjS2AwugXhX2sw=\");\n_c = AuthProviderWrapper;\nexport { AuthProviderWrapper, AuthContext };\nvar _c;\n$RefreshReg$(_c, \"AuthProviderWrapper\");","map":{"version":3,"names":["React","useState","useEffect","axios","Alert","Link","jsxDEV","_jsxDEV","API_URL","AuthContext","createContext","AuthProviderWrapper","props","_s","isLoggedIn","setIsLoggedIn","isLoading","setIsLoading","user","setUser","authenticateUser","storedToken","localStorage","getItem","get","headers","Authorization","then","response","data","catch","error","removeToken","removeItem","logOutUser","alert","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/cameronaitcheson-labarr/Desktop/Ironhack/Module3/Project/my-artsy-app-client/src/context/Auth.context.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from \"axios\"\nimport { Alert } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nconst API_URL = \"http://localhost:5005\"\n\nconst AuthContext = React.createContext()\n\n\nfunction AuthProviderWrapper(props){\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n    const [isLoading, setIsLoading] = useState(true);\n    const [user, setUser] = useState(null);\n\n    function authenticateUser(){\n        const storedToken = localStorage.getItem(\"authToken\")\n\n        if (storedToken){\n            axios.get(`${API_URL}/auth/verify`, {headers: {Authorization: `Bearer ${storedToken}`}})\n                .then((response) => {\n                    const user = response.data\n                    setIsLoggedIn(true);\n                    setIsLoading(false);\n                    setUser(user); \n                })\n                .catch((error) => {\n                    setIsLoggedIn(false);\n                    setIsLoading(false);\n                    setUser(null); \n                })\n        } else {\n            setIsLoggedIn(false);\n            setIsLoading(false);\n            setUser(null);   \n        }\n    }\n\n    function removeToken(){\n        localStorage.removeItem(\"authToken\")\n    }\n\n    function logOutUser(){\n        removeToken()\n        authenticateUser()\n        \n        alert(\"You just Logged Out, my friend.\")\n    }\n\n    useEffect(() => {\n        authenticateUser()\n    },[])\n\n    return (\n        <AuthContext.Provider value={{isLoggedIn, isLoading, user, authenticateUser, logOutUser, removeToken}}>\n            {props.children}\n        </AuthContext.Provider>\n    )\n}\n\nexport {AuthProviderWrapper, AuthContext}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,IAAI,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AACxC,MAAMC,OAAO,GAAG,uBAAuB;AAEvC,MAAMC,WAAW,gBAAGT,KAAK,CAACU,aAAa,EAAE;AAGzC,SAASC,mBAAmBA,CAACC,KAAK,EAAC;EAAAC,EAAA;EAC/B,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACe,SAAS,EAAEC,YAAY,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACiB,IAAI,EAAEC,OAAO,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EAEtC,SAASmB,gBAAgBA,CAAA,EAAE;IACvB,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAErD,IAAIF,WAAW,EAAC;MACZlB,KAAK,CAACqB,GAAG,CAAE,GAAEhB,OAAQ,cAAa,EAAE;QAACiB,OAAO,EAAE;UAACC,aAAa,EAAG,UAASL,WAAY;QAAC;MAAC,CAAC,CAAC,CACnFM,IAAI,CAAEC,QAAQ,IAAK;QAChB,MAAMV,IAAI,GAAGU,QAAQ,CAACC,IAAI;QAC1Bd,aAAa,CAAC,IAAI,CAAC;QACnBE,YAAY,CAAC,KAAK,CAAC;QACnBE,OAAO,CAACD,IAAI,CAAC;MACjB,CAAC,CAAC,CACDY,KAAK,CAAEC,KAAK,IAAK;QACdhB,aAAa,CAAC,KAAK,CAAC;QACpBE,YAAY,CAAC,KAAK,CAAC;QACnBE,OAAO,CAAC,IAAI,CAAC;MACjB,CAAC,CAAC;IACV,CAAC,MAAM;MACHJ,aAAa,CAAC,KAAK,CAAC;MACpBE,YAAY,CAAC,KAAK,CAAC;MACnBE,OAAO,CAAC,IAAI,CAAC;IACjB;EACJ;EAEA,SAASa,WAAWA,CAAA,EAAE;IAClBV,YAAY,CAACW,UAAU,CAAC,WAAW,CAAC;EACxC;EAEA,SAASC,UAAUA,CAAA,EAAE;IACjBF,WAAW,EAAE;IACbZ,gBAAgB,EAAE;IAElBe,KAAK,CAAC,iCAAiC,CAAC;EAC5C;EAEAjC,SAAS,CAAC,MAAM;IACZkB,gBAAgB,EAAE;EACtB,CAAC,EAAC,EAAE,CAAC;EAEL,oBACIb,OAAA,CAACE,WAAW,CAAC2B,QAAQ;IAACC,KAAK,EAAE;MAACvB,UAAU;MAAEE,SAAS;MAAEE,IAAI;MAAEE,gBAAgB;MAAEc,UAAU;MAAEF;IAAW,CAAE;IAAAM,QAAA,EACjG1B,KAAK,CAAC0B;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACI;AAE/B;AAAC7B,EAAA,CAhDQF,mBAAmB;AAAAgC,EAAA,GAAnBhC,mBAAmB;AAkD5B,SAAQA,mBAAmB,EAAEF,WAAW;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}