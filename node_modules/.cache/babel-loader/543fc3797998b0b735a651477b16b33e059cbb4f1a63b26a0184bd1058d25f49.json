{"ast":null,"code":"var _jsxFileName = \"/Users/maxko/Desktop/IronHack Bootcamp/3-module/my-artsy-app/my-artsy-app-client/src/context/Auth.context.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\n/* const API_URL = \"http://localhost:\" */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/React.createContext();\nfunction AuthProviderWrapper(props) {\n  _s();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  function authenticateUser() {\n    const storedToken = localStorage.getItem(\"authToken\");\n    if (storedToken) {\n      axios.get(`${API_URL}/auth/verify`, {\n        headers: {\n          Authorization: `Bearer ${storedToken}`\n        }\n      }).then(response => {\n        const user = response.data;\n        setIsLoggedIn(true);\n        setIsLoading(false);\n        setUser(user);\n      }).catch(error => {\n        setIsLoggedIn(false);\n        setIsLoading(false);\n        setUser(null);\n      });\n    } else {\n      setIsLoggedIn(false);\n      setIsLoading(false);\n      setUser(null);\n    }\n  }\n  function removeToken() {\n    localStorage.removeItem(\"authToken\");\n  }\n  function logOutUser() {\n    removeToken();\n    authenticateUser();\n  }\n  useEffect(() => {\n    authenticateUser();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isLoggedIn,\n      isLoading,\n      user,\n      authenticateUser,\n      logOutUser\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n_s(AuthProviderWrapper, \"/wkMYUExdyWtGyjS2AwugXhX2sw=\");\n_c = AuthProviderWrapper;\nexport { AuthProviderWrapper, AuthContext };\nvar _c;\n$RefreshReg$(_c, \"AuthProviderWrapper\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","AuthContext","createContext","AuthProviderWrapper","props","_s","isLoggedIn","setIsLoggedIn","isLoading","setIsLoading","user","setUser","authenticateUser","storedToken","localStorage","getItem","get","API_URL","headers","Authorization","then","response","data","catch","error","removeToken","removeItem","logOutUser","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/maxko/Desktop/IronHack Bootcamp/3-module/my-artsy-app/my-artsy-app-client/src/context/Auth.context.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from \"axios\"\n/* const API_URL = \"http://localhost:\" */\n\nconst AuthContext = React.createContext()\n\nfunction AuthProviderWrapper(props){\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n    const [isLoading, setIsLoading] = useState(true);\n    const [user, setUser] = useState(null);\n\n    function authenticateUser(){\n        const storedToken = localStorage.getItem(\"authToken\")\n\n        if (storedToken){\n            axios.get(`${API_URL}/auth/verify`, {headers: {Authorization: `Bearer ${storedToken}`}})\n                .then((response) => {\n                    const user = response.data\n                    setIsLoggedIn(true);\n                    setIsLoading(false);\n                    setUser(user); \n                })\n                .catch((error) => {\n                    setIsLoggedIn(false);\n                    setIsLoading(false);\n                    setUser(null); \n                })\n        } else {\n            setIsLoggedIn(false);\n            setIsLoading(false);\n            setUser(null);   \n        }\n    }\n\n    function removeToken(){\n        localStorage.removeItem(\"authToken\")\n    }\n\n    function logOutUser(){\n        removeToken()\n        authenticateUser()\n    }\n\n    useEffect(() => {\n        authenticateUser()\n    },[])\n\n    return (\n        <AuthContext.Provider value={{isLoggedIn, isLoading, user, authenticateUser, logOutUser}}>\n            {props.children}\n        </AuthContext.Provider>\n    )\n}\n\nexport {AuthProviderWrapper, AuthContext}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEA,MAAMC,WAAW,gBAAGN,KAAK,CAACO,aAAa,EAAE;AAEzC,SAASC,mBAAmBA,CAACC,KAAK,EAAC;EAAAC,EAAA;EAC/B,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACY,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACc,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAEtC,SAASgB,gBAAgBA,CAAA,EAAE;IACvB,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAErD,IAAIF,WAAW,EAAC;MACZf,KAAK,CAACkB,GAAG,CAAE,GAAEC,OAAQ,cAAa,EAAE;QAACC,OAAO,EAAE;UAACC,aAAa,EAAG,UAASN,WAAY;QAAC;MAAC,CAAC,CAAC,CACnFO,IAAI,CAAEC,QAAQ,IAAK;QAChB,MAAMX,IAAI,GAAGW,QAAQ,CAACC,IAAI;QAC1Bf,aAAa,CAAC,IAAI,CAAC;QACnBE,YAAY,CAAC,KAAK,CAAC;QACnBE,OAAO,CAACD,IAAI,CAAC;MACjB,CAAC,CAAC,CACDa,KAAK,CAAEC,KAAK,IAAK;QACdjB,aAAa,CAAC,KAAK,CAAC;QACpBE,YAAY,CAAC,KAAK,CAAC;QACnBE,OAAO,CAAC,IAAI,CAAC;MACjB,CAAC,CAAC;IACV,CAAC,MAAM;MACHJ,aAAa,CAAC,KAAK,CAAC;MACpBE,YAAY,CAAC,KAAK,CAAC;MACnBE,OAAO,CAAC,IAAI,CAAC;IACjB;EACJ;EAEA,SAASc,WAAWA,CAAA,EAAE;IAClBX,YAAY,CAACY,UAAU,CAAC,WAAW,CAAC;EACxC;EAEA,SAASC,UAAUA,CAAA,EAAE;IACjBF,WAAW,EAAE;IACbb,gBAAgB,EAAE;EACtB;EAEAf,SAAS,CAAC,MAAM;IACZe,gBAAgB,EAAE;EACtB,CAAC,EAAC,EAAE,CAAC;EAEL,oBACIZ,OAAA,CAACC,WAAW,CAAC2B,QAAQ;IAACC,KAAK,EAAE;MAACvB,UAAU;MAAEE,SAAS;MAAEE,IAAI;MAAEE,gBAAgB;MAAEe;IAAU,CAAE;IAAAG,QAAA,EACpF1B,KAAK,CAAC0B;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACI;AAE/B;AAAC7B,EAAA,CA9CQF,mBAAmB;AAAAgC,EAAA,GAAnBhC,mBAAmB;AAgD5B,SAAQA,mBAAmB,EAAEF,WAAW;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}